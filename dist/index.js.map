{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,YAAY,EAAE,MAAM,SAAS,CAAC;AACvC,OAAO,IAAI,MAAM,WAAW,CAAC;AAC7B,OAAO,EAAE,QAAQ,EAAE,MAAM,MAAM,CAAC;AAMhC,MAAM,UAAU,GAAG,CAAC,EAAE,QAAQ,EAAE,OAAO,KAAe,EAAE,QAAQ,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,EAAU,EAAE;IAC7F,MAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC;IACtD,OAAO;QACL,IAAI,EAAE,2BAA2B;QACjC,KAAK,CAAC,UAAU;YAEd,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBACnB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;YAC9C,CAAC,CAAC,CAAC;QACL,CAAC;QACD,KAAK,CAAC,cAAc;YAClB,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBACnB,MAAM,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;gBAC7D,IAAI,CAAC,QAAQ,CAAC;oBACZ,IAAI,EAAE,OAAO;oBACb,QAAQ,EAAE,CAAC;oBACX,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;iBACzC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,UAAU,CAAC","sourcesContent":["import type { Plugin } from 'rollup';\nimport { readFileSync } from 'node:fs';\nimport path from 'node:path';\nimport { globSync } from 'glob';\n// import { createFilter } from '@rollup/pluginutils';\n// import { fileURLToPath } from 'node:url';\n\ntype FileType = { patterns: string[]; rootDir: string };\n\nconst jsonMinify = ({ patterns, rootDir }: FileType = { patterns: [], rootDir: '' }): Plugin => {\n  const fileList = globSync(patterns, { cwd: rootDir });\n  return {\n    name: 'rollup-plugin-json-minify',\n    async buildStart() {\n      // console.log('buildStart');\n      fileList.forEach(f => {\n        this.addWatchFile(path.resolve(rootDir, f));\n      });\n    },\n    async generateBundle() {\n      fileList.forEach(f => {\n        const data = readFileSync(path.resolve(rootDir, f), 'utf-8');\n        this.emitFile({\n          type: 'asset',\n          fileName: f,\n          source: JSON.stringify(JSON.parse(data)),\n        });\n      });\n    },\n  };\n};\n\nexport default jsonMinify;\n"]}